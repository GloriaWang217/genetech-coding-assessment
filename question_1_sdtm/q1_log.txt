> source("~/Full time/Genetech - ADS programmer/question_1_sdtm/01_create_ds_domain.R", echo=TRUE)> # ==============================================================================> # Program: 01_create_ds_domain.R> # Purpose: Create SDTM DS (Dis .... [TRUNCATED] > library(pharmaverseraw)> library(dplyr)> library(readr)> library(lubridate)> # Read source data -------------------------------------------------------------> ds_raw <- pharmaverseraw::ds_raw> ec_raw <- pharmaverseraw::ec_raw> study_ct <- read_csv("sdtm_ct.csv", show_col_types = FALSE)                                                                                                                         > # Generate oak_id_vars and fix data quality issues -----------------------------> ds_raw <- ds_raw %>%+   generate_oak_id_vars(+     pat_var = "P ..." ... [TRUNCATED] > # Create DM domain for derive_study_day ----------------------------------------> dm <- ec_raw %>%+   mutate(ECSTDT = dmy(IT.ECSTDAT)) %>%+   gro .... [TRUNCATED] > # Create base DS dataset -------------------------------------------------------> ds <- ds_raw %>%+   select(oak_id, raw_source, patient_number)> # Map variables using sdtm.oak functions ---------------------------------------> ds <- ds %>%+   # DSTERM: verbatim disposition term+   assign_n .... [TRUNCATED] ℹ These terms could not be mapped per the controlled terminology: "Randomized", "Completed", "FINAL LAB VISIT", "FINAL RETRIEVAL VISIT", "Study Terminated by Sponsor", "Screen Failure", and "Lost to Follow-Up".ℹ These terms could not be mapped per the controlled terminology: "Unscheduled 6.1", "Unscheduled 1.1", "Unscheduled 5.1", "Unscheduled 4.1", "Unscheduled 8.2", and "Unscheduled 13.1".ℹ These terms could not be mapped per the controlled terminology: "Unscheduled 6.1", "Unscheduled 1.1", "Unscheduled 5.1", "Unscheduled 4.1", "Unscheduled 8.2", and "Unscheduled 13.1".> # Derive SDTM standard variables -----------------------------------------------> ds <- ds %>%+   mutate(+     STUDYID = unique(ds_raw$STUDY),+  .... [TRUNCATED] > # Select and order final variables ---------------------------------------------> ds_final <- ds %>%+   select(+     STUDYID, DOMAIN, USUBJID, DS .... [TRUNCATED] > # Save output ------------------------------------------------------------------> saveRDS(ds_final, "ds.rds")> write.csv(ds_final, "ds.csv", row.names = FALSE, na = "")> # Print summary for verification -----------------------------------------------> cat("\n=== DS Domain Summary ===\n")=== DS Domain Summary ===> cat("Dimensions:", nrow(ds_final), "obs x", ncol(ds_final), "vars\n")Dimensions: 850 obs x 12 vars> cat("Variables:", paste(names(ds_final), collapse = ", "), "\n")Variables: STUDYID, DOMAIN, USUBJID, DSSEQ, DSTERM, DSDECOD, DSCAT, VISITNUM, VISIT, DSDTC, DSSTDTC, DSSTDY > cat("Unique subjects:", n_distinct(ds_final$USUBJID), "\n")Unique subjects: 306 > cat("\nDSCAT distribution:\n")DSCAT distribution:> print(table(ds_final$DSCAT)) DISPOSITION EVENT        OTHER EVENT PROTOCOL MILESTONE                306                290                254 > cat("\nMissing values:\n")Missing values:> print(colSums(is.na(ds_final))) STUDYID   DOMAIN  USUBJID    DSSEQ   DSTERM  DSDECOD    DSCAT VISITNUM    VISIT    DSDTC  DSSTDTC   DSSTDY        0        0        0        0        0        0        0        0        0        0        0      850 Warning message:There were 2 warnings in `mutate()`.The first warning was:ℹ In argument: `VISITNUM = as.numeric(VISITNUM)`.Caused by warning:! NAs introduced by coercionℹ Run dplyr::last_dplyr_warnings() to see the 1 remaining warning. > 